---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Layout>
	<div class="page-container">
		<h1 class="page-title">Blog</h1>
		
		<section class="content-section">
			<div class="blog-grid">
				{
					posts.map((post) => (
						<article class="blog-card">
							<a href={`/blog/${post.id}/`} class="blog-link">
								<img 
									width={720} 
									height={360} 
									src={post.data.heroImage} 
									alt={post.data.title}
									class="blog-image"
								/>
								<div class="blog-content">
									<h2 class="blog-title">{post.data.title}</h2>
									<p class="blog-date">
										<FormattedDate date={post.data.pubDate} />
									</p>
								</div>
							</a>
						</article>
					))
				}
			</div>
		</section>
	</div>
</Layout>
